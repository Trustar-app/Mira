# ✅ Mira 智能化妆镜 Gradio 项目界面修改方案

---

## 🎯 总体目标

* 用 **左侧 Tab 导航栏** 管理不同功能区：配置、用户档案、产品卡片集、主对话界面；
* 每个功能区独立显示在主界面区域， **自动切换内容** ；
* **产品卡片集支持图文编辑与添加多个产品** ；
* 移除冗余组件（如音频输入、图片集反馈等），保持界面简洁高效。

---

## 📐 界面结构设计

### 🔹 页面布局（左右两栏）：

```text
┌───────────────────────────────┬─────────────────────────────────────┐
│           左侧导航栏           │             主内容展示区域             │
│    ┌────────────┐      │                                         │
│    │ 🎛 配置设置    │ Tab → │ 显示配置输入框、说明文字                    │
│    │ 👤 用户档案    │       │ 显示用户档案编辑区域                        │
│    │ 💄 产品卡片集  │       │ 显示产品图片+文本列表，支持添加/编辑产品          │
│    │ 💬 对话主界面  │       │ 显示用户输入区 + Chatbot 聊天区 + 反馈结果 Markdown │
└───────────────────────────────┴─────────────────────────────────────┘
```

---

## 📁 每个 Tab 功能详细说明

### 1. 🎛 配置设置（使用模型相关参数）

* 使用组件：
  * `Textbox(type="password")`：API Key
  * `Textbox`：Base URL（模型调用地址）
  * `Textbox`：模型名称（如 `qwen-14b-chat`）
  * `Markdown`：说明文字，指导如何获取配置信息
* 配置应保存在 `gr.State()` 中，提交输入时传入后台处理函数。

---

### 2. 👤 用户档案（可编辑）

* 使用组件：
  * `Textbox(lines=10, interactive=True)`：显示并编辑用户档案内容（支持 JSON 或纯文本）
* 所编辑内容可用于生成个性化推荐或对话上下文处理。

---

### 3. 💄 产品卡片集（可添加编辑多个产品）

* 推荐组件组合方式：
  * `gr.Dataset`，含以下字段：
    * `Image`：产品图片
    * `Textbox`：产品名称
    * `Textbox`（多行）：产品说明或使用建议
* 示例配置：

```python
gr.Dataset(
    components=[gr.Image(), gr.Textbox(), gr.Textbox(lines=3)],
    headers=["图片", "名称", "说明"],
    label="产品卡片集",
    samples=[],
    editable=True
)
```

* 用户可动态添加/编辑产品内容，适配多样性使用场景。

---

### 4. 💬 对话主界面

* 用户输入区（左侧）：
  * `gr.Video`：视频输入（含音频）
  * `gr.Textbox`：文本输入（含占位提示）
  * `gr.Button("提交")`：绑定处理函数
* AI 对话区（右侧）：
  * `gr.Chatbot`：显示问答历史
* 分析反馈区（下方）：
  * `gr.Markdown`：结构化结果（设置固定高度、支持滚动）
  * 推荐 CSS：
    ```css
    #feedback-md {
        max-height: 300px;
        overflow-y: auto;
        background: #fff;
        padding: 12px;
        border: 1px solid #ccc;
        border-radius: 8px;
    }
    ```

---

## ❌ 移除内容说明

| 原功能组件                    | 当前处理                     |
| ----------------------------- | ---------------------------- |
| `Audio`音频输入             | 已移除                       |
| `Image`/`Gallery`分析图片 | 已移除                       |
| 切换用户按钮                  | 已移除，采用单用户可编辑模型 |

---

## ⚙️ 后端逻辑处理建议

* 提交按钮绑定函数：`submit_btn.click(...)`
  * 需传入配置参数（API Key、Base URL、模型名）、用户档案、产品卡片集等；
  * 用 `gr.State()` 保持持久状态或跨组件访问。

---

## ✅ 总结表

| 功能区         | 主组件                 | 是否可编辑 | 是否可动态添加 |
| -------------- | ---------------------- | ---------- | -------------- |
| 配置设置       | Textbox + Markdown     | ✅         | ❌             |
| 用户档案       | Textbox (多行)         | ✅         | ❌             |
| 产品卡片集     | Dataset / Image + Text | ✅         | ✅             |
| 主界面对话区   | Video + Chatbot        | ✅         | --             |
| 结构化反馈区域 | Markdown（固定高度）   | 否         | --             |
